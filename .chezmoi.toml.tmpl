{{- $server := promptStringOnce . "singbox.server" "Sing-box proxy server IP" -}}
{{- $uuid := promptStringOnce . "singbox.uuid" "Sing-box VLESS UUID" -}}
{{- $publicKey := promptStringOnce . "singbox.public_key" "Sing-box Reality public key" -}}
{{- $shortId := promptStringOnce . "singbox.short_id" "Sing-box Reality short ID" -}}
{{- $port := promptIntOnce . "singbox.port" "Sing-box port" -}}
{{- $sni := promptStringOnce . "singbox.sni" "Sing-box SNI" -}}
{{- $browserfingerprint := promptStringOnce . "singbox.browserfingerprint" "Sing-box browser fingerprint" -}}
{{- $openrouterKey := promptStringOnce . "opencode.openrouter_api_key" "OpenRouter API key" -}}

[data.singbox]
server = {{ $server | quote }}
uuid = {{ $uuid | quote }}
public_key = {{ $publicKey | quote }}
port = {{ $port }} 
short_id = {{ $shortId | quote }} 
sni = {{ $sni | quote }}
browserfingerprint = {{ $browserfingerprint | quote }}

[data.opencode]
openrouter_api_key = {{ $openrouterKey | quote }}

[chezmoi]
# chezmoi configuration

[git]
# Auto-add changes
autoadd = false

# Auto-commit changes
autocommit = false

# Auto-push changes
autopush = false

[diff]
# Use built-in diff
useBuiltin = "auto"

# Color output
color = "auto"

# Pager
pager = "less"
pagerArgs = ["-R"]

[hooks]
[hooks.apply.post]
command = "/bin/bash"
args = ["-c", "for prog in waybar Hyprland rofi dunst; do if pgrep -x $prog >/dev/null; then if [ \"$prog\" = \"waybar\" ]; then killall -SIGUSR2 waybar; echo Waybar reloaded; elif [ \"$prog\" = \"Hyprland\" ]; then hyprctl reload; echo Hyprland reloaded; elif [ \"$prog\" = \"rofi\" ]; then killall rofi; echo Rofi restarted; elif [ \"$prog\" = \"dunst\" ]; then dunstctl reload; echo Dunst reloaded; fi; fi; done"]
